{"id":"Urqi","dependencies":[{"name":"/Users/hansoksendahl/Code/hox.io/packages/@hox.io/app/.babelrc","includedInParent":true,"mtime":1560383891736},{"name":"/Users/hansoksendahl/Code/hox.io/packages/@hox.io/app/package.json","includedInParent":true,"mtime":1561481613478},{"name":"./addNode","loc":{"line":1,"column":20},"parent":"/Users/hansoksendahl/Code/hox.io/packages/@hox.io/app/src/components/cards/zui/db/node/putNodes.js","resolved":"/Users/hansoksendahl/Code/hox.io/packages/@hox.io/app/src/components/cards/zui/db/node/addNode.js"}],"generated":{"js":"\"use strict\";Object.defineProperty(exports,\"__esModule\",{value:!0}),exports.default=t;var e=n(require(\"./addNode\"));function n(e){return e&&e.__esModule?e:{default:e}}async function t(n,{id:t,content:o,links:s}){const i=[n.nodes.put({id:t,content:o})],d=[];return s.forEach(async({id:o,icon:s})=>{if(null!==o)i.push(n.links.where(\"from\").equals(t).and(({to:e})=>e===o).modify({icon:s})),d.push(o);else{const o=await(0,e.default)(n,{content:\"\"});i.push(n.links.add({from:t,to:o,icon:s}))}}),i.push(n.links.where(\"to\").noneOf(d).and(({from:e})=>e===t).delete()),await Promise.all(i)}"},"sourceMaps":{"js":{"mappings":[{"source":"src/components/cards/zui/db/node/putNodes.js","original":{"line":41,"column":1},"generated":{"line":1,"column":0}},{"source":"src/components/cards/zui/db/node/putNodes.js","original":{"line":41,"column":1},"generated":{"line":1,"column":13}},{"source":"src/components/cards/zui/db/node/putNodes.js","original":{"line":41,"column":1},"generated":{"line":1,"column":20}},{"source":"src/components/cards/zui/db/node/putNodes.js","original":{"line":41,"column":1},"generated":{"line":1,"column":35}},{"source":"src/components/cards/zui/db/node/putNodes.js","original":{"line":41,"column":1},"generated":{"line":1,"column":43}},{"source":"src/components/cards/zui/db/node/putNodes.js","original":{"line":41,"column":1},"generated":{"line":1,"column":56}},{"source":"src/components/cards/zui/db/node/putNodes.js","original":{"line":41,"column":1},"generated":{"line":1,"column":57}},{"source":"src/components/cards/zui/db/node/putNodes.js","original":{"line":41,"column":1},"generated":{"line":1,"column":64}},{"source":"src/components/cards/zui/db/node/putNodes.js","original":{"line":41,"column":1},"generated":{"line":1,"column":68}},{"source":"src/components/cards/zui/db/node/putNodes.js","original":{"line":41,"column":1},"generated":{"line":1,"column":76}},{"source":"src/components/cards/zui/db/node/putNodes.js","original":{"line":41,"column":1},"generated":{"line":1,"column":84}},{"source":"src/components/cards/zui/db/node/putNodes.js","original":{"line":1,"column":0},"generated":{"line":1,"column":86}},{"source":"src/components/cards/zui/db/node/putNodes.js","original":{"line":1,"column":0},"generated":{"line":1,"column":90}},{"source":"src/components/cards/zui/db/node/putNodes.js","original":{"line":1,"column":0},"generated":{"line":1,"column":92}},{"source":"src/components/cards/zui/db/node/putNodes.js","original":{"line":1,"column":0},"generated":{"line":1,"column":94}},{"source":"src/components/cards/zui/db/node/putNodes.js","original":{"line":1,"column":0},"generated":{"line":1,"column":102}},{"source":"src/components/cards/zui/db/node/putNodes.js","original":{"line":41,"column":1},"generated":{"line":1,"column":116}},{"source":"src/components/cards/zui/db/node/putNodes.js","original":{"line":41,"column":1},"generated":{"line":1,"column":125}},{"source":"src/components/cards/zui/db/node/putNodes.js","original":{"line":41,"column":1},"generated":{"line":1,"column":127}},{"source":"src/components/cards/zui/db/node/putNodes.js","original":{"line":41,"column":1},"generated":{"line":1,"column":130}},{"source":"src/components/cards/zui/db/node/putNodes.js","original":{"line":41,"column":1},"generated":{"line":1,"column":137}},{"source":"src/components/cards/zui/db/node/putNodes.js","original":{"line":41,"column":1},"generated":{"line":1,"column":140}},{"source":"src/components/cards/zui/db/node/putNodes.js","original":{"line":41,"column":1},"generated":{"line":1,"column":142}},{"source":"src/components/cards/zui/db/node/putNodes.js","original":{"line":41,"column":1},"generated":{"line":1,"column":153}},{"source":"src/components/cards/zui/db/node/putNodes.js","original":{"line":41,"column":1},"generated":{"line":1,"column":155}},{"source":"src/components/cards/zui/db/node/putNodes.js","original":{"line":41,"column":1},"generated":{"line":1,"column":156}},{"source":"src/components/cards/zui/db/node/putNodes.js","original":{"line":41,"column":1},"generated":{"line":1,"column":164}},{"source":"src/components/cards/zui/db/node/putNodes.js","original":{"line":3,"column":15},"generated":{"line":1,"column":167}},{"source":"src/components/cards/zui/db/node/putNodes.js","name":"putNodes","original":{"line":3,"column":30},"generated":{"line":1,"column":182}},{"source":"src/components/cards/zui/db/node/putNodes.js","name":"db","original":{"line":4,"column":2},"generated":{"line":1,"column":184}},{"source":"src/components/cards/zui/db/node/putNodes.js","original":{"line":5,"column":2},"generated":{"line":1,"column":187}},{"source":"src/components/cards/zui/db/node/putNodes.js","name":"id","original":{"line":6,"column":4},"generated":{"line":1,"column":190}},{"source":"src/components/cards/zui/db/node/putNodes.js","original":{"line":5,"column":2},"generated":{"line":1,"column":192}},{"source":"src/components/cards/zui/db/node/putNodes.js","name":"content","original":{"line":7,"column":4},"generated":{"line":1,"column":200}},{"source":"src/components/cards/zui/db/node/putNodes.js","original":{"line":5,"column":2},"generated":{"line":1,"column":202}},{"source":"src/components/cards/zui/db/node/putNodes.js","name":"links","original":{"line":8,"column":4},"generated":{"line":1,"column":208}},{"source":"src/components/cards/zui/db/node/putNodes.js","name":"queries","original":{"line":11,"column":8},"generated":{"line":1,"column":212}},{"source":"src/components/cards/zui/db/node/putNodes.js","name":"queries","original":{"line":11,"column":8},"generated":{"line":1,"column":218}},{"source":"src/components/cards/zui/db/node/putNodes.js","original":{"line":11,"column":18},"generated":{"line":1,"column":220}},{"source":"src/components/cards/zui/db/node/putNodes.js","name":"db","original":{"line":12,"column":4},"generated":{"line":1,"column":221}},{"source":"src/components/cards/zui/db/node/putNodes.js","name":"nodes","original":{"line":12,"column":7},"generated":{"line":1,"column":223}},{"source":"src/components/cards/zui/db/node/putNodes.js","name":"put","original":{"line":12,"column":13},"generated":{"line":1,"column":229}},{"source":"src/components/cards/zui/db/node/putNodes.js","original":{"line":12,"column":17},"generated":{"line":1,"column":233}},{"source":"src/components/cards/zui/db/node/putNodes.js","name":"id","original":{"line":12,"column":18},"generated":{"line":1,"column":234}},{"source":"src/components/cards/zui/db/node/putNodes.js","name":"id","original":{"line":12,"column":18},"generated":{"line":1,"column":237}},{"source":"src/components/cards/zui/db/node/putNodes.js","name":"content","original":{"line":12,"column":22},"generated":{"line":1,"column":239}},{"source":"src/components/cards/zui/db/node/putNodes.js","name":"content","original":{"line":12,"column":22},"generated":{"line":1,"column":247}},{"source":"src/components/cards/zui/db/node/putNodes.js","name":"linkIds","original":{"line":14,"column":8},"generated":{"line":1,"column":252}},{"source":"src/components/cards/zui/db/node/putNodes.js","original":{"line":14,"column":18},"generated":{"line":1,"column":254}},{"source":"src/components/cards/zui/db/node/putNodes.js","original":{"line":40,"column":9},"generated":{"line":1,"column":257}},{"source":"src/components/cards/zui/db/node/putNodes.js","name":"links","original":{"line":16,"column":2},"generated":{"line":1,"column":264}},{"source":"src/components/cards/zui/db/node/putNodes.js","name":"forEach","original":{"line":16,"column":8},"generated":{"line":1,"column":266}},{"source":"src/components/cards/zui/db/node/putNodes.js","original":{"line":17,"column":4},"generated":{"line":1,"column":274}},{"source":"src/components/cards/zui/db/node/putNodes.js","name":"id","original":{"line":18,"column":6},"generated":{"line":1,"column":281}},{"source":"src/components/cards/zui/db/node/putNodes.js","name":"toId","original":{"line":18,"column":10},"generated":{"line":1,"column":284}},{"source":"src/components/cards/zui/db/node/putNodes.js","name":"icon","original":{"line":19,"column":6},"generated":{"line":1,"column":286}},{"source":"src/components/cards/zui/db/node/putNodes.js","name":"icon","original":{"line":19,"column":6},"generated":{"line":1,"column":291}},{"source":"src/components/cards/zui/db/node/putNodes.js","name":"toId","original":{"line":21,"column":10},"generated":{"line":1,"column":297}},{"source":"src/components/cards/zui/db/node/putNodes.js","original":{"line":21,"column":19},"generated":{"line":1,"column":300}},{"source":"src/components/cards/zui/db/node/putNodes.js","name":"toId","original":{"line":21,"column":10},"generated":{"line":1,"column":307}},{"source":"src/components/cards/zui/db/node/putNodes.js","name":"queries","original":{"line":22,"column":8},"generated":{"line":1,"column":309}},{"source":"src/components/cards/zui/db/node/putNodes.js","name":"push","original":{"line":22,"column":16},"generated":{"line":1,"column":311}},{"source":"src/components/cards/zui/db/node/putNodes.js","name":"db","original":{"line":23,"column":10},"generated":{"line":1,"column":316}},{"source":"src/components/cards/zui/db/node/putNodes.js","name":"links","original":{"line":23,"column":13},"generated":{"line":1,"column":318}},{"source":"src/components/cards/zui/db/node/putNodes.js","name":"where","original":{"line":23,"column":19},"generated":{"line":1,"column":324}},{"source":"src/components/cards/zui/db/node/putNodes.js","original":{"line":23,"column":25},"generated":{"line":1,"column":330}},{"source":"src/components/cards/zui/db/node/putNodes.js","name":"equals","original":{"line":23,"column":33},"generated":{"line":1,"column":338}},{"source":"src/components/cards/zui/db/node/putNodes.js","name":"id","original":{"line":23,"column":40},"generated":{"line":1,"column":345}},{"source":"src/components/cards/zui/db/node/putNodes.js","name":"and","original":{"line":23,"column":44},"generated":{"line":1,"column":348}},{"source":"src/components/cards/zui/db/node/putNodes.js","original":{"line":23,"column":48},"generated":{"line":1,"column":352}},{"source":"src/components/cards/zui/db/node/putNodes.js","name":"to","original":{"line":23,"column":50},"generated":{"line":1,"column":354}},{"source":"src/components/cards/zui/db/node/putNodes.js","name":"to","original":{"line":23,"column":50},"generated":{"line":1,"column":357}},{"source":"src/components/cards/zui/db/node/putNodes.js","name":"to","original":{"line":23,"column":58},"generated":{"line":1,"column":362}},{"source":"src/components/cards/zui/db/node/putNodes.js","name":"toId","original":{"line":23,"column":65},"generated":{"line":1,"column":366}},{"source":"src/components/cards/zui/db/node/putNodes.js","name":"modify","original":{"line":23,"column":71},"generated":{"line":1,"column":369}},{"source":"src/components/cards/zui/db/node/putNodes.js","original":{"line":23,"column":78},"generated":{"line":1,"column":376}},{"source":"src/components/cards/zui/db/node/putNodes.js","name":"icon","original":{"line":23,"column":79},"generated":{"line":1,"column":377}},{"source":"src/components/cards/zui/db/node/putNodes.js","name":"icon","original":{"line":23,"column":79},"generated":{"line":1,"column":382}},{"source":"src/components/cards/zui/db/node/putNodes.js","name":"linkIds","original":{"line":25,"column":8},"generated":{"line":1,"column":387}},{"source":"src/components/cards/zui/db/node/putNodes.js","name":"push","original":{"line":25,"column":16},"generated":{"line":1,"column":389}},{"source":"src/components/cards/zui/db/node/putNodes.js","name":"toId","original":{"line":25,"column":21},"generated":{"line":1,"column":394}},{"source":"src/components/cards/zui/db/node/putNodes.js","original":{"line":26,"column":13},"generated":{"line":1,"column":401}},{"source":"src/components/cards/zui/db/node/putNodes.js","name":"nodeId","original":{"line":27,"column":14},"generated":{"line":1,"column":402}},{"source":"src/components/cards/zui/db/node/putNodes.js","name":"nodeId","original":{"line":27,"column":14},"generated":{"line":1,"column":408}},{"source":"src/components/cards/zui/db/node/putNodes.js","original":{"line":27,"column":29},"generated":{"line":1,"column":416}},{"source":"src/components/cards/zui/db/node/putNodes.js","name":"db","original":{"line":27,"column":37},"generated":{"line":1,"column":418}},{"source":"src/components/cards/zui/db/node/putNodes.js","name":"db","original":{"line":27,"column":37},"generated":{"line":1,"column":420}},{"source":"src/components/cards/zui/db/node/putNodes.js","name":"db","original":{"line":27,"column":37},"generated":{"line":1,"column":429}},{"source":"src/components/cards/zui/db/node/putNodes.js","original":{"line":27,"column":41},"generated":{"line":1,"column":431}},{"source":"src/components/cards/zui/db/node/putNodes.js","name":"content","original":{"line":27,"column":43},"generated":{"line":1,"column":432}},{"source":"src/components/cards/zui/db/node/putNodes.js","original":{"line":27,"column":52},"generated":{"line":1,"column":440}},{"source":"src/components/cards/zui/db/node/putNodes.js","name":"queries","original":{"line":29,"column":8},"generated":{"line":1,"column":445}},{"source":"src/components/cards/zui/db/node/putNodes.js","name":"push","original":{"line":29,"column":16},"generated":{"line":1,"column":447}},{"source":"src/components/cards/zui/db/node/putNodes.js","name":"db","original":{"line":30,"column":10},"generated":{"line":1,"column":452}},{"source":"src/components/cards/zui/db/node/putNodes.js","name":"links","original":{"line":30,"column":13},"generated":{"line":1,"column":454}},{"source":"src/components/cards/zui/db/node/putNodes.js","name":"add","original":{"line":30,"column":19},"generated":{"line":1,"column":460}},{"source":"src/components/cards/zui/db/node/putNodes.js","original":{"line":30,"column":23},"generated":{"line":1,"column":464}},{"source":"src/components/cards/zui/db/node/putNodes.js","name":"from","original":{"line":30,"column":25},"generated":{"line":1,"column":465}},{"source":"src/components/cards/zui/db/node/putNodes.js","name":"id","original":{"line":30,"column":31},"generated":{"line":1,"column":470}},{"source":"src/components/cards/zui/db/node/putNodes.js","name":"to","original":{"line":30,"column":35},"generated":{"line":1,"column":472}},{"source":"src/components/cards/zui/db/node/putNodes.js","name":"nodeId","original":{"line":30,"column":39},"generated":{"line":1,"column":475}},{"source":"src/components/cards/zui/db/node/putNodes.js","name":"icon","original":{"line":30,"column":47},"generated":{"line":1,"column":477}},{"source":"src/components/cards/zui/db/node/putNodes.js","name":"icon","original":{"line":30,"column":47},"generated":{"line":1,"column":482}},{"source":"src/components/cards/zui/db/node/putNodes.js","name":"queries","original":{"line":36,"column":2},"generated":{"line":1,"column":490}},{"source":"src/components/cards/zui/db/node/putNodes.js","name":"push","original":{"line":36,"column":10},"generated":{"line":1,"column":492}},{"source":"src/components/cards/zui/db/node/putNodes.js","name":"db","original":{"line":37,"column":4},"generated":{"line":1,"column":497}},{"source":"src/components/cards/zui/db/node/putNodes.js","name":"links","original":{"line":37,"column":7},"generated":{"line":1,"column":499}},{"source":"src/components/cards/zui/db/node/putNodes.js","name":"where","original":{"line":37,"column":13},"generated":{"line":1,"column":505}},{"source":"src/components/cards/zui/db/node/putNodes.js","original":{"line":37,"column":19},"generated":{"line":1,"column":511}},{"source":"src/components/cards/zui/db/node/putNodes.js","name":"noneOf","original":{"line":37,"column":25},"generated":{"line":1,"column":517}},{"source":"src/components/cards/zui/db/node/putNodes.js","name":"linkIds","original":{"line":37,"column":32},"generated":{"line":1,"column":524}},{"source":"src/components/cards/zui/db/node/putNodes.js","name":"and","original":{"line":37,"column":41},"generated":{"line":1,"column":527}},{"source":"src/components/cards/zui/db/node/putNodes.js","original":{"line":37,"column":45},"generated":{"line":1,"column":531}},{"source":"src/components/cards/zui/db/node/putNodes.js","name":"from","original":{"line":37,"column":47},"generated":{"line":1,"column":533}},{"source":"src/components/cards/zui/db/node/putNodes.js","name":"from","original":{"line":37,"column":47},"generated":{"line":1,"column":538}},{"source":"src/components/cards/zui/db/node/putNodes.js","name":"from","original":{"line":37,"column":57},"generated":{"line":1,"column":543}},{"source":"src/components/cards/zui/db/node/putNodes.js","name":"id","original":{"line":37,"column":66},"generated":{"line":1,"column":547}},{"source":"src/components/cards/zui/db/node/putNodes.js","name":"delete","original":{"line":37,"column":70},"generated":{"line":1,"column":550}},{"source":"src/components/cards/zui/db/node/putNodes.js","name":"Promise","original":{"line":40,"column":15},"generated":{"line":1,"column":566}},{"source":"src/components/cards/zui/db/node/putNodes.js","name":"all","original":{"line":40,"column":23},"generated":{"line":1,"column":574}},{"source":"src/components/cards/zui/db/node/putNodes.js","name":"queries","original":{"line":40,"column":27},"generated":{"line":1,"column":578}}],"sources":{"src/components/cards/zui/db/node/putNodes.js":"import addNode from './addNode';\n\nexport default async function putNodes(\n  db,\n  {\n    id,\n    content,\n    links,\n  }\n) {\n  const queries = [\n    db.nodes.put({id, content}),\n  ];\n  const linkIds = [];\n\n  links.forEach(\n    async ({\n      id: toId,\n      icon,\n    }) => {\n      if (toId !== null) {\n        queries.push(\n          db.links.where('from').equals(id).and(({to}) => to === toId).modify({icon})\n        );\n        linkIds.push(toId);\n      } else {\n        const nodeId = await addNode(db, { content: '' });\n\n        queries.push(\n          db.links.add({ from: id, to: nodeId, icon })\n        );\n      }\n    }\n  );\n\n  queries.push(\n    db.links.where('to').noneOf(linkIds).and(({from}) => from === id).delete()\n  );\n\n  return await Promise.all(queries);\n}"},"lineCount":null}},"error":null,"hash":"fff7f825b981868845323243f8314e94","cacheData":{"env":{}}}