# Set up Bun
FROM oven/bun:latest as dependencies
WORKDIR /app
RUN corepack enable
COPY . . 

# Install app dependencies
RUN pnpm install

# Build production image
FROM dependencies as builder

# Build app
WORKDIR /app/packages/swiftmindinstitute.org
RUN bun run build

# Run the server
WORKDIR /app
EXPOSE 8080
CMD ["bun", "run", "start"]